generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Role {
  id        Int          @id @default(autoincrement())
  name      String       @unique
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  modules   RoleModule[]
  users     User[]
}

model Module {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  description String?
  roles       RoleModule[]
}

model RoleModule {
  id        Int     @id @default(autoincrement())
  roleId    Int
  moduleId  Int
  canCreate Boolean @default(false)
  canDelete Boolean @default(false)
  canRead   Boolean @default(false)
  canUpdate Boolean @default(false)
  status    Boolean @default(false)
  module    Module  @relation(fields: [moduleId], references: [id], onDelete: Cascade)
  role      Role    @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([roleId, moduleId])
}

model User {
  id                 Int            @id @default(autoincrement())
  email              String         @unique
  password           String
  roleId             Int
  Bio                String?
  firstname          String?
  lastname           String?
  address            String?
  country            String?
  phone              String?
  postalcode         String?
  state              String?
  messengerID        String?
  telegramNumber     String?
  whatsappNumber     String?
  activityLogs       ActivityLog[]
  coordinatedClinics Clinic[]       @relation("ClinicCoordinator")
  PatientQuery       PatientQuery[]
  role               Role           @relation(fields: [roleId], references: [id], onDelete: Cascade)
}

model ActivityLog {
  id          Int      @id @default(autoincrement())
  userId      Int?
  action      String
  description String?
  entityType  String?
  entityId    Int?
  ipAddress   String?
  userAgent   String?
  createdAt   DateTime @default(now())
  user        User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model EmailTemplate {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  subject   String
  body      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Blog {
  id         Int      @id @default(autoincrement())
  title      String
  content    String
  image_url  String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  tagId      String?
  tagurl     String?
  titleurl   String?
}

model Tag {
  id   Int    @id @default(autoincrement())
  name String @unique
}

model SeoPages {
  id            Int      @id @default(autoincrement())
  title         String
  slug          String   @unique
  content       String
  meta_title    String?
  meta_desc     String?
  meta_keywords String?
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
  seopage       String?
}

model Subscription {
  id                   Int       @id @default(autoincrement())
  userId               Int?
  stripeCustomerId     String
  stripeSubscriptionId String
  status               String
  currentPeriodEnd     DateTime?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @default(now()) @updatedAt
}

model Category {
  id                 Int        @id @default(autoincrement())
  name               String     @db.VarChar(150)
  slug               String     @unique @db.VarChar(150)
  parent_category_id Int?
  level              Int        @default(1)
  description        String?
  icon               String?    @db.VarChar(100)
  sort_order         Int        @default(0)
  status             String     @default("active") @db.VarChar(20)
  is_featured        Boolean    @default(false)
  full_path          String?    @db.VarChar(500)
  path_ids           String?    @db.VarChar(255)
  created_by         Int?
  updated_by         Int?
  created_at         DateTime   @default(now())
  updated_at         DateTime?
  parent             Category?  @relation("CategoryHierarchy", fields: [parent_category_id], references: [id], onDelete: Cascade)
  children           Category[] @relation("CategoryHierarchy")

  @@index([slug])
  @@index([parent_category_id])
}

model Patients {
  id              Int       @id @default(autoincrement())
  patient_code    String    @unique
  first_name      String?
  last_name       String?
  gender          String?
  dob             DateTime?
  phone           String?
  email           String?   @unique
  password        String?
  reset_token     String?
  reset_token_exp DateTime?
  address         String?
  city            String?
  state           String?
  pincode         String?
  notes           String?
  status          Int       @default(0)
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  uuid            String    @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  blockreason     String?
}

model ClinicUser {
  id               Int       @id @default(autoincrement())
  uuid             String    @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email            String    @unique
  phone            String?
  passwordHash     String
  resetToken       String?   @unique
  resetTokenExpiry DateTime?
  isVerified       Boolean   @default(false)
  isActive         Boolean   @default(true)
  lastLogin        DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  refreshToken     String?
  firstname        String?
  lastname         String?
  isOtpVerify      Boolean   @default(false)
  status           Int       @default(0)
  phoneVerify      Int?
  clinics          Clinic[]
}

model Clinic {
  id                  Int                    @id @default(autoincrement())
  userId              Int
  name                String
  description         String?
  address             String?
  state               String?
  phone               String?
  email               String?
  imageUrl            String?
  priorityLevel       Int                    @default(0)
  promotionEnd        DateTime?
  isActive            Boolean                @default(true)
  createdAt           DateTime               @default(now())
  updatedAt           DateTime               @updatedAt
  clinic_code         String?                @unique
  uuid                String                 @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clinicUserId        Int?
  clinicUserUuid      String?
  websiteurl          String?
  status              String?                @default("0")
  cityId              String?
  countryId           String?
  commission          String?
  onboardingUrl       String?
  stripeaccountid     String?
  isStripeVerify      String?
  reasonText          String?
  cordinatorid        Int?
  telegramNumber      String?
  whatsappNumber      String?
  cep                 String?
  citycep             String?
  cnpj                String?
  complement          String?
  latitude            Decimal?               @db.Decimal
  longitude           Decimal?               @db.Decimal
  neighborhood        String?
  street              String?
  phoneVerify         Int                    @default(0)
  TermsID             String?
  CheckedTime         DateTime?              @db.Timestamp(6)
  city                City?                  @relation(fields: [cityId], references: [id])
  clinicUser          ClinicUser?            @relation(fields: [clinicUserId], references: [id])
  cordinator          User?                  @relation("ClinicCoordinator", fields: [cordinatorid], references: [id])
  country             Country?               @relation(fields: [countryId], references: [id])
  clinicDoctors       ClinicDoctor[]
  clinicDoctorAddress ClinicDoctorAddress[]
  googleAccount       ClinicGoogleAccount?
  cliniclistingboosts ClinicListingBoost[]
  orders              ClinicListingOrder[]
  packages            ClinicPackage[]
  ratingSummary       ClinicRatingSummary?
  clinics             ClinicSpecialization[]
  clinicsSpecialty    ClinicSpecialty[]
  clinicTreatments    ClinicTreatment[]
  googleReviews       GoogleReview[]
  queries             PatientQuery[]
}

model ClinicGoogleAccount {
  id               Int       @id @default(autoincrement())
  clinicUuid       String    @unique @db.Uuid
  googleAccountId  String
  googleLocationId String
  googlePlaceId    String?
  accessToken      String?
  refreshToken     String?
  tokenExpiry      DateTime?
  lastSyncedAt     DateTime?
  isConnected      Boolean   @default(true)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  clinic           Clinic    @relation(fields: [clinicUuid], references: [uuid], onDelete: Cascade)
}

model GoogleReview {
  id             Int       @id @default(autoincrement())
  clinicUuid     String    @db.Uuid
  googleReviewId String    @unique
  authorName     String?
  rating         Int
  comment        String?
  reviewTime     DateTime
  replyText      String?
  replyTime      DateTime?
  createdAt      DateTime  @default(now())
  clinic         Clinic    @relation(fields: [clinicUuid], references: [uuid], onDelete: Cascade)

  @@index([clinicUuid])
}

model ClinicRatingSummary {
  clinicUuid    String   @id @db.Uuid
  averageRating Decimal  @db.Decimal(2, 1)
  totalReviews  Int
  updatedAt     DateTime @updatedAt
  clinic        Clinic   @relation(fields: [clinicUuid], references: [uuid], onDelete: Cascade)
}

model ClinicImages {
  id         Int      @id @default(autoincrement())
  uuid       String   @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clinicuuid String?
  type       String?
  Images     String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  sort       String?
}

model ClinicSurgeryImage {
  uuid        String   @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clinicUuid  String?
  doctorUuid  String?
  imageType   String?
  imageUrl    String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  type        String?
  surgeryId   String?
  id          String   @id @default(uuid()) @db.Uuid
  treatmentid String?
}

model ListingPackage {
  id                  Int                  @id @default(autoincrement())
  name                String
  description         String?
  price               Decimal              @db.Decimal(10, 2)
  durationDays        Int
  priorityLevel       Int                  @default(1)
  isActive            Boolean              @default(true)
  createdAt           DateTime             @default(now())
  updatedAt           DateTime             @updatedAt
  listinfpackage_code String?              @unique
  uuid                String               @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  orders              ClinicListingOrder[]
}

model ClinicListingOrder {
  id                 Int            @id @default(autoincrement())
  clinicId           Int
  packageId          Int
  userId             Int
  stripePaymentId    String?        @unique
  amount             Decimal        @db.Decimal(10, 2)
  startDate          DateTime
  endDate            DateTime
  status             String         @default("ACTIVE")
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  cliniclistingorder String?        @unique
  uuid               String         @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clinic             Clinic         @relation(fields: [clinicId], references: [id])
  package            ListingPackage @relation(fields: [packageId], references: [id])
}

model Accreditation {
  id          Int                   @id @default(autoincrement())
  uuid        String                @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  image       String?
  name        String?
  description String?
  createdAt   DateTime              @default(now())
  updatedAt   DateTime              @updatedAt
  selectedBy  ClinicAccreditation[]
}

model ClinicAccreditation {
  id              Int           @id @default(autoincrement())
  uuid            String        @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  accreditationId Int
  clinicuuid      String?
  accreditation   Accreditation @relation(fields: [accreditationId], references: [id])

  @@unique([clinicuuid, accreditationId])
}

model ClinicDescription {
  id               Int      @id @default(autoincrement())
  uuid             String   @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  briefDescription String?
  fullDescription  String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  clinicuuid       String?
}

model Doctor {
  id                  Int                    @id @default(autoincrement())
  uuid                String                 @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clinicuuid          String?
  firstname           String?
  lastname            String?
  email               String?
  dob                 String?
  crm                 String?
  languages           Json?
  image               String?
  videurl             String?
  cpf                 String?
  degree              String?
  briefDescription    String?
  createdAt           DateTime               @default(now())
  fullDescription     String?
  updatedAt           DateTime               @updatedAt
  DoctorVerify        Int?                   @default(0)
  Reason              String?
  clinicDoctors       ClinicDoctor[]
  clinicDoctorAddress ClinicDoctorAddress[]
  specializations     DoctorSpecialization[]
  specialtys          DoctorSpecialty[]
  doctorTreatments    DoctorTreatment[]
  packagesDoctor      PackageDoctor[]        @relation("DoctorsuuidFk")
  patientQueries      PatientQuery[]
}

model ClinicDoctor {
  clinicUuid String   @db.Uuid
  doctorUuid String   @db.Uuid
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  id         String   @id @default(uuid()) @db.Uuid
  clinic     Clinic   @relation(fields: [clinicUuid], references: [uuid])
  doctor     Doctor   @relation(fields: [doctorUuid], references: [uuid])

  @@unique([clinicUuid, doctorUuid])
}

model ClinicDoctorAddress {
  id           String   @id @default(uuid()) @db.Uuid
  clinicUuid   String   @db.Uuid
  doctorUuid   String   @db.Uuid
  zipcode      String?
  street       String?
  complement   String?
  postalUnit   String?
  neighborhood String?
  city         String?
  stateCode    String?
  stateName    String?
  region       String?
  ibgeCode     String?
  giaCode      String?
  areaCode     String?
  siafiCode    String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  clinic       Clinic   @relation(fields: [clinicUuid], references: [uuid])
  doctor       Doctor   @relation(fields: [doctorUuid], references: [uuid])
}

model Specialization {
  id                     String                  @id @default(uuid()) @db.Uuid
  name                   String                  @unique
  description            String?
  createdAt              DateTime                @default(now())
  updatedAt              DateTime                @updatedAt
  clinics                ClinicSpecialization[]
  doctors                DoctorSpecialization[]
  packagesSpecialization PackageSpecialization[]
}

model ClinicSpecialization {
  id                  String                 @id @default(uuid()) @db.Uuid
  clinicUuid          String                 @db.Uuid
  specializationId    String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  clinic              Clinic                 @relation(fields: [clinicUuid], references: [uuid])
  specialization      Specialization?        @relation(fields: [specializationId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])

  @@unique([clinicUuid, specializationId])
}

model DoctorSpecialization {
  id                  String                 @id @default(uuid()) @db.Uuid
  doctorUuid          String                 @db.Uuid
  specializationId    String?                @db.Uuid
  createdAt           DateTime               @default(now())
  suggestedCategoryId String?                @db.Uuid
  doctor              Doctor                 @relation(fields: [doctorUuid], references: [uuid])
  specialization      Specialization?        @relation(fields: [specializationId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])

  @@unique([doctorUuid, specializationId])
}

model SpecializationRequest {
  id                    String                  @id @default(uuid()) @db.Uuid
  type                  String?
  name                  String
  description           String?
  status                String                  @default("pending")
  adminNote             String?
  createdAt             DateTime                @default(now())
  updatedAt             DateTime                @updatedAt
  clinicSpecialization  ClinicSpecialization[]
  clinicsSpecialty      ClinicSpecialty[]
  clinicTreatment       ClinicTreatment[]
  doctorSpecializations DoctorSpecialization[]
  doctorspecialty       DoctorSpecialty[]
  doctorTreatments      DoctorTreatment[]
  packageProcedure      PackageProcedure[]
  packageSpecialization PackageSpecialization[]
  packageSpecialty      PackageSpecialty[]
  packageTreatment      PackageTreatment[]
}

model Specialty {
  name             String             @unique
  description      String?
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
  id               String             @id @default(uuid()) @db.Uuid
  clinicsSpecialty ClinicSpecialty[]
  doctors          DoctorSpecialty[]
  packageSpecialty PackageSpecialty[]
}

model ClinicSpecialty {
  id                  String                 @id @default(uuid()) @db.Uuid
  clinicUuid          String                 @db.Uuid
  specialtyId         String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  clinic              Clinic                 @relation(fields: [clinicUuid], references: [uuid])
  specialty           Specialty?             @relation(fields: [specialtyId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])

  @@unique([clinicUuid, specialtyId])
}

model DoctorSpecialty {
  id                  String                 @id @default(uuid()) @db.Uuid
  doctorUuid          String                 @db.Uuid
  specialtyId         String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  doctor              Doctor                 @relation(fields: [doctorUuid], references: [uuid])
  specialty           Specialty?             @relation(fields: [specialtyId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])

  @@unique([doctorUuid, specialtyId])
}

model Treatment {
  id                String             @id @default(uuid()) @db.Uuid
  name              String             @unique
  description       String?
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  isFeatured        Boolean            @default(false)
  clinicTreatments  ClinicTreatment[]
  doctorTreatments  DoctorTreatment[]
  packageTreatments PackageTreatment[]
}

model ClinicTreatment {
  id                  String                 @id @default(uuid()) @db.Uuid
  clinicUuid          String                 @db.Uuid
  treatmentid         String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  clinic              Clinic                 @relation(fields: [clinicUuid], references: [uuid])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])
  treatment           Treatment?             @relation(fields: [treatmentid], references: [id])

  @@unique([clinicUuid, treatmentid])
}

model DoctorTreatment {
  id                  String                 @id @default(uuid()) @db.Uuid
  doctorUuid          String                 @db.Uuid
  treatmentid         String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  doctor              Doctor                 @relation(fields: [doctorUuid], references: [uuid])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])
  treatment           Treatment?             @relation(fields: [treatmentid], references: [id])

  @@unique([doctorUuid, treatmentid])
}

model ClinicPackage {
  id                String                  @id @default(uuid()) @db.Uuid
  clinicId          String                  @db.Uuid
  title             String
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
  actualprice       String?
  briefdescription  String?
  discountedprice   String?
  fulldescription   String?
  Visibilty         Int?                    @default(0)
  status            Int?                    @default(0)
  boosts            ClinicBoost[]
  clinic            Clinic                  @relation(fields: [clinicId], references: [uuid])
  packagesDoctor    PackageDoctor[]         @relation("PackageDoctors")
  fieldValues       PackageFieldValue[]
  packagespackages  PackageProcedure[]
  packages          PackageSpecialization[]
  package           PackageSpecialty[]
  packagestreatment PackageTreatment[]
  queries           PatientQuery[]
}

model BoostPackage {
  id                 String               @id @default(uuid()) @db.Uuid
  name               String
  durationDays       Int
  price              Decimal              @db.Decimal(10, 2)
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  description        String?
  placement          Int                  @default(2)
  type               Int                  @default(0)
  clinics            ClinicBoost[]
  cliniclistingboost ClinicListingBoost[]
}

model ClinicListingBoost {
  id             String       @id @default(uuid()) @db.Uuid
  clinicId       String       @db.Uuid
  boostPackageId String       @db.Uuid
  startAt        DateTime     @default(now())
  endAt          DateTime
  isActive       Boolean      @default(true)
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  clinicuserid   String?
  boostPackage   BoostPackage @relation(fields: [boostPackageId], references: [id])
  clinics        Clinic       @relation(fields: [clinicId], references: [uuid])
}

model ClinicBoost {
  id              String        @id @default(uuid()) @db.Uuid
  clinicPackageId String        @db.Uuid
  boostPackageId  String        @db.Uuid
  startAt         DateTime      @default(now())
  endAt           DateTime
  isActive        Boolean       @default(true)
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  clinicuserid    String?
  boostPackage    BoostPackage  @relation(fields: [boostPackageId], references: [id])
  clinicPackage   ClinicPackage @relation(fields: [clinicPackageId], references: [id])
}

model PackageSpecialization {
  id                  String                 @id @default(uuid()) @db.Uuid
  packageId           String                 @db.Uuid
  specializationId    String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  packages            ClinicPackage          @relation(fields: [packageId], references: [id])
  specialization      Specialization?        @relation(fields: [specializationId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])
}

model PackageSpecialty {
  id                  String                 @id @default(uuid()) @db.Uuid
  packageid           String                 @db.Uuid
  specialtyId         String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  package             ClinicPackage          @relation(fields: [packageid], references: [id])
  specialty           Specialty?             @relation(fields: [specialtyId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])
}

model PackageTreatment {
  id                  String                 @id @default(uuid()) @db.Uuid
  packageId           String                 @db.Uuid
  treatmentid         String?                @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  createdAt           DateTime               @default(now())
  packagestreatment   ClinicPackage          @relation(fields: [packageId], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])
  treatment           Treatment?             @relation(fields: [treatmentid], references: [id])
}

model Procedure {
  id          String             @id @default(uuid())
  name        String
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt
  isActive    Boolean            @default(false)
  description String?
  procedure   PackageProcedure[]
}

model PackageProcedure {
  id                  String                 @id @default(uuid())
  procedureid         String?
  createdAt           DateTime               @default(now())
  packageId           String                 @db.Uuid
  suggestedCategoryId String?                @db.Uuid
  packagespackages    ClinicPackage          @relation(fields: [packageId], references: [id])
  procedure           Procedure?             @relation(fields: [procedureid], references: [id])
  suggestedCategory   SpecializationRequest? @relation(fields: [suggestedCategoryId], references: [id])
}

model PackageFieldDefinition {
  id          String              @id @default(uuid()) @db.Uuid
  fieldKey    String              @unique
  label       String
  fieldType   String
  required    Boolean             @default(false)
  createdAt   DateTime            @default(now())
  fieldValues PackageFieldValue[]
}

model PackageFieldValue {
  id           String                 @id @default(uuid()) @db.Uuid
  packageId    String                 @db.Uuid
  fieldId      String                 @db.Uuid
  valueText    String?
  valueNumber  Int?
  valueBoolean Boolean?
  valueDate    DateTime?
  createdAt    DateTime               @default(now())
  field        PackageFieldDefinition @relation(fields: [fieldId], references: [id])
  package      ClinicPackage          @relation(fields: [packageId], references: [id])

  @@unique([packageId, fieldId])
}

model PackageDoctor {
  id        String        @id @default(uuid()) @db.Uuid
  packageId String        @db.Uuid
  createdAt DateTime      @default(now())
  doctorId  String        @db.Uuid
  doctors   Doctor        @relation("DoctorsuuidFk", fields: [doctorId], references: [uuid])
  packages  ClinicPackage @relation("PackageDoctors", fields: [packageId], references: [id])
}

model Country {
  id        String   @id @default(uuid())
  name      String
  code      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  cities    City[]
  clinics   Clinic[]
}

model City {
  id        String   @id @default(uuid())
  name      String
  countryId String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  country   Country  @relation(fields: [countryId], references: [id])
  clinics   Clinic[]

  @@index([countryId])
}

model PatientQuery {
  id                  String                       @id @default(uuid()) @db.Uuid
  patientName         String
  phoneNumber         String
  message             String
  clinicId            String?                      @db.Uuid
  packageId           String?                      @db.Uuid
  createdAt           DateTime                     @default(now())
  countryCode         String?
  email               String?
  status              Int                          @default(0)
  subject             String?
  telegramUsername    String?
  whatsappNumber      String?
  finalPrice          String?
  querycode           String?
  city                String?
  postalCode          String?
  state               String?
  streetAddress       String?
  medicalReportsValue String?
  procedureTimeValue  String?
  treatmentName       String?
  whatMatterMostName  String?
  doctorid            String?                      @db.Uuid
  cordinatorid        Int?
  clinic              Clinic?                      @relation(fields: [clinicId], references: [uuid])
  User                User?                        @relation(fields: [cordinatorid], references: [id])
  doctor              Doctor?                      @relation(fields: [doctorid], references: [uuid])
  package             ClinicPackage?               @relation(fields: [packageId], references: [id])
  paymentDetails      PatientQueryPaymentDetails[]
}

model PatientQueryPaymentDetails {
  id              String       @id @default(uuid()) @db.Uuid
  packageprice    String?
  finalprice      String?
  generatedlink   String?
  generatedamount String?
  status          Int          @default(0)
  patientQueryId  String       @db.Uuid
  createdAt       DateTime     @default(now())
  commission      String?
  platformfee     String?
  vendorfee       String?
  paymentLinkid   String?
  patientQuery    PatientQuery @relation(fields: [patientQueryId], references: [id])
}

model terms_and_conditions {
  id         String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  version    Int
  name       String    @db.VarChar(255)
  content    String
  is_active  Boolean?  @default(false)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)
}

model Notification {
  id           Int      @id @default(autoincrement())
  userId       Int?
  message      String
  isRead       Boolean  @default(false)
  type         String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @default(now())
  uuid         String   @unique @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  globaluserid String?

  @@index([userId])
}
